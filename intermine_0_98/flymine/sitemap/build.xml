
<project name="flymine-sitemap" default="default" basedir=".">
  
  <description>generates the sitemap for the flymine webapp</description>
  <import file="../../imbuild/task.xml"/>
  <import file="../../imbuild/library.xml"/>

  <target name="-init-generate-sitemap-vars">
    <property name="sitemap.paths" value=""/>
    <property name="project.sitePrefix" value=""/>
  </target>


  <target name="-init-generate-sitemap" depends="init, -init-deps, -init-task-xml, -init-jar, -init-properties, -set-sitemap-output"/>

  <target name="-set-sitemap-output" unless="sitemap.output">    
    <mkdir dir="${dist.dir}/sitemaps"/>
    <property name="sitemap.output" value="${dist.dir}/sitemaps"/>
  </target>

  <target name="generate-sitemap" depends="-init-generate-sitemap-vars, -init-generate-sitemap">
    <taskdef name="generate-sitemap" classname="org.intermine.bio.util.SiteMapTask">
      <classpath refid="task.class.path"/>      
    </taskdef>
    <echo message="${sitemap.paths}"/>
    <generate-sitemap objectStore="${objectstore.name}"
                      outputFile="${sitemap.output}/sitemap"
                      taxonIds="${sitemap.taxonIds}"
                      webappPages="${sitemap.webappPages}"
                      paths="${sitemap.paths}"
                      sitePrefix="${project.sitePrefix}"
                      targetModel="org.flymine.model.genomic"
                      defaultContext="${webapp.defaultContext}" />
  </target>

  <target name="default" depends="generate-sitemap"/>
  <target name="do-jar" depends="generate-sitemap"/>
</project>
